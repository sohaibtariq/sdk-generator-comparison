/*
 * LobLib
 *
 * This file was automatically generated by APIMATIC v3.0 ( https://www.apimatic.io ).
 */

package com.lob.api.controllers;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNotNull;
import static org.junit.Assert.assertTrue;

import com.lob.api.ApiHelper;
import com.lob.api.LobClient;
import com.lob.api.exceptions.ApiException;
import com.lob.api.models.BeforeAfter;
import com.lob.api.models.Card;
import com.lob.api.models.CardEditable;
import com.lob.api.models.CardsResponse;
import io.apimatic.core.utilities.TestHelper;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.Map;
import org.junit.AfterClass;
import org.junit.BeforeClass;
import org.junit.Test;

public class CardsControllerTest extends BaseControllerTest {

    /**
     * Client instance.
     */
    private static LobClient client;
    
    /**
     * Controller instance (for all tests).
     */
    private static CardsController controller;

    /**
     * Setup test class.
     */
    @BeforeClass
    public static void setUpClass() {
        client = createConfiguration();
        controller = client.getCardsController();
    }

    /**
     * Tear down test class.
     */
    @AfterClass
    public static void tearDownClass() {
        controller = null;
    }

    /**
     * Returns a list of your cards. The cards are returned sorted by creation date, with the most
     * recently created addresses appearing first.
     * @throws Throwable exception if occurs.
     */
    @Test
    public void testTestCardsList() throws Exception {
        // Parameters for the API call
        Integer limit = 10;
        BeforeAfter beforeAfter = null;
        List<String> include = null;

        // Set callback and perform API call
        CardsResponse result = null;
        try {
            result = controller.cardsList(limit, beforeAfter, include);
        } catch (ApiException e) {
            // Empty block
        }

        // Test whether the response is null
        assertNotNull("Response is null", 
                httpResponse.getResponse());
        // Test response code
        assertEquals("Status is not 200", 
                200, httpResponse.getResponse().getStatusCode());

        // Test headers
        Map<String, String> headers = new LinkedHashMap<String, String>();
        headers.put("Content-Type", "application/json");
        
        assertTrue("Headers do not match", TestHelper.areHeadersProperSubsetOf(
                headers, httpResponse.getResponse().getHeaders().asSimpleMap(), true));

        // Test whether the captured response is as we expected
        assertNotNull("Result does not exist", 
                result);
        assertTrue("Response body does not match in keys", 
                TestHelper.isJsonObjectProperSubsetOf(
                "{\"data\":[{\"id\":\"card_7a6d73c5c8457fc\",\"account_id\":\"fa9ea650fc7b31a89f92"
                + "\",\"description\":null,\"url\":\"https://lob-assets.com/cards/card_c51ae96f5ceb"
                + "f3e.pdf?version=v1&expires=1636910992&signature=mnsDH2DAxdkN9VibdlLMxJC86sME5WYD"
                + "qkNtmvGwdNsAaUWfbnv0rJhJ1mR8Ol4uxQq61j5wYZ0r3s-lBkQfDA\",\"size\":\"2.125x3.375"
                + "\",\"auto_reorder\":false,\"reorder_quantity\":null,\"raw_url\":\"https://lob-as"
                + "sets.com/cards/card_c51ae96f5cebf3e_raw.pdf?version=v1&expires=1636910992&signat"
                + "ure=-bZo31FMAp2vmNaZKyXn_Qa4APqwtNinw76FrQ7uyQejFZw6VBQQYfoiQ642iXh0H2K5i2aOo8_B"
                + "Akt3UJdVDw\",\"front_original_url\":\"https://lob-assets.com/cards/card_c51ae96f"
                + "5cebf3e_raw.pdf?version=v1&expires=1636910992&signature=-bZo31FMAp2vmNaZKyXn_Qa4"
                + "APqwtNinw76FrQ7uyQejFZw6VBQQYfoiQ642iXh0H2K5i2aOo8_BAkt3UJdVDw\",\"back_original"
                + "_url\":\"https://lob-assets.com/cards/card_c51ae96f5cebf3e_raw.pdf?version=v1&ex"
                + "pires=1636910992&signature=-bZo31FMAp2vmNaZKyXn_Qa4APqwtNinw76FrQ7uyQejFZw6VBQQY"
                + "foiQ642iXh0H2K5i2aOo8_BAkt3UJdVDw\",\"thumbnails\":[{\"small\":\"https://lob-ass"
                + "ets.com/cards/card_c51ae96f5cebf3e_thumb_small_1.png?version=v1&expires=16369109"
                + "92&signature=mrv8JDvpZK4I8WUGH0tPdtK-My5oes0Ltj_gL7BDw96SpCTTeZFHkz81SzclyFP9dQR"
                + "tlsvAsjcuGcTBvCvOCg\",\"medium\":\"https://lob-assets.com/cards/card_c51ae96f5ce"
                + "bf3e_thumb_medium_1.png?version=v1&expires=1636910992&signature=VgL_2Ckm_kxKiWGg"
                + "WtdNoy9HHOn8dGYSVOn7UqyCbwdbVlUtx28TRN4Bo8Iru3n0keKp9He0YhKT1ILotznMDA\",\"large"
                + "\":\"https://lob-assets.com/cards/card_c51ae96f5cebf3e_thumb_large_1.png?version"
                + "=v1&expires=1636910992&signature=FKSzymA13j-CQ0uk20cGHZTzT3vimzNBYrgp-xifLFg4mMd"
                + "o1BZALR5O0aF_jVhsX614hKP35ONdYl47TQxXAw\"}],\"available_quantity\":10000,\"pendi"
                + "ng_quantity\":0,\"countries\":null,\"status\":\"rendered\",\"mode\":\"test\",\"o"
                + "rientation\":\"horizontal\",\"threshold_amount\":0,\"date_created\":\"2021-03-24"
                + "T22:51:42.838Z\",\"date_modified\":\"2021-03-24T22:51:42.838Z\",\"send_date\":"
                + "\"2021-03-24T22:51:42.838Z\",\"object\":\"card\"}],\"object\":\"list\",\"previou"
                + "s_url\":null,\"next_url\":null,\"count\":1}",
                TestHelper.convertStreamToString(httpResponse.getResponse().getRawBody()), 
                false, true, false));
    }

    /**
     * Creates a new card given information.
     * @throws Throwable exception if occurs.
     */
    @Test
    public void testTestCardCreate() throws Exception {
        // Parameters for the API call
        CardEditable body = ApiHelper.deserialize(
                "{\"description\":\"Test card\",\"front\":\"https://s3-us-west-2.amazonaws.com/publ"
                + "ic.lob.com/assets/card_horizontal.pdf\",\"back\":\"https://s3-us-west-2.amazonaw"
                + "s.com/public.lob.com/assets/card_horizontal.pdf\",\"size\":\"2.125x3.375\"}",
                CardEditable.class);

        // Set callback and perform API call
        Card result = null;
        try {
            result = controller.cardCreate(body);
        } catch (ApiException e) {
            // Empty block
        }

        // Test whether the response is null
        assertNotNull("Response is null", 
                httpResponse.getResponse());
        // Test response code
        assertEquals("Status is not 200", 
                200, httpResponse.getResponse().getStatusCode());

        // Test headers
        Map<String, String> headers = new LinkedHashMap<String, String>();
        headers.put("Content-Type", "application/json");
        
        assertTrue("Headers do not match", TestHelper.areHeadersProperSubsetOf(
                headers, httpResponse.getResponse().getHeaders().asSimpleMap(), true));

        // Test whether the captured response is as we expected
        assertNotNull("Result does not exist", 
                result);
        assertTrue("Response body does not match in keys", 
                TestHelper.isJsonObjectProperSubsetOf(
                "{\"id\":\"card_7a6d73c5c8457fc\",\"account_id\":\"fa9ea650fc7b31a89f92\",\"descrip"
                + "tion\":\"Test card\",\"url\":\"https://lob-assets.com/cards/card_c51ae96f5cebf3e"
                + ".pdf?version=v1&expires=1636910992&signature=mnsDH2DAxdkN9VibdlLMxJC86sME5WYDqkN"
                + "tmvGwdNsAaUWfbnv0rJhJ1mR8Ol4uxQq61j5wYZ0r3s-lBkQfDA\",\"size\":\"2.125x3.375\","
                + "\"auto_reorder\":false,\"reorder_quantity\":null,\"raw_url\":\"https://lob-asset"
                + "s.com/cards/card_c51ae96f5cebf3e_raw.pdf?version=v1&expires=1636910992&signature"
                + "=-bZo31FMAp2vmNaZKyXn_Qa4APqwtNinw76FrQ7uyQejFZw6VBQQYfoiQ642iXh0H2K5i2aOo8_BAkt"
                + "3UJdVDw\",\"front_original_url\":\"https://lob-assets.com/cards/card_c51ae96f5ce"
                + "bf3e_raw.pdf?version=v1&expires=1636910992&signature=-bZo31FMAp2vmNaZKyXn_Qa4APq"
                + "wtNinw76FrQ7uyQejFZw6VBQQYfoiQ642iXh0H2K5i2aOo8_BAkt3UJdVDw\",\"back_original_ur"
                + "l\":\"https://lob-assets.com/cards/card_c51ae96f5cebf3e_raw.pdf?version=v1&expir"
                + "es=1636910992&signature=-bZo31FMAp2vmNaZKyXn_Qa4APqwtNinw76FrQ7uyQejFZw6VBQQYfoi"
                + "Q642iXh0H2K5i2aOo8_BAkt3UJdVDw\",\"thumbnails\":[{\"small\":\"https://lob-assets"
                + ".com/cards/card_c51ae96f5cebf3e_thumb_small_1.png?version=v1&expires=1636910992&"
                + "signature=mrv8JDvpZK4I8WUGH0tPdtK-My5oes0Ltj_gL7BDw96SpCTTeZFHkz81SzclyFP9dQRtls"
                + "vAsjcuGcTBvCvOCg\",\"medium\":\"https://lob-assets.com/cards/card_c51ae96f5cebf3"
                + "e_thumb_medium_1.png?version=v1&expires=1636910992&signature=VgL_2Ckm_kxKiWGgWtd"
                + "Noy9HHOn8dGYSVOn7UqyCbwdbVlUtx28TRN4Bo8Iru3n0keKp9He0YhKT1ILotznMDA\",\"large\":"
                + "\"https://lob-assets.com/cards/card_c51ae96f5cebf3e_thumb_large_1.png?version=v1"
                + "&expires=1636910992&signature=FKSzymA13j-CQ0uk20cGHZTzT3vimzNBYrgp-xifLFg4mMdo1B"
                + "ZALR5O0aF_jVhsX614hKP35ONdYl47TQxXAw\"},{\"small\":\"https://lob-assets.com/card"
                + "s/card_c51ae96f5cebf3e_thumb_small_2.png?version=v1&expires=1636910992&signature"
                + "=IWsmPa_ULlv2yyqjX564d_YfHHY_M7i9YxDnw-WXDr2jtOFcArmRZQbnHeE9g_rYxnddJbgosuv8-c2"
                + "utiu7Cg\",\"medium\":\"https://lob-assets.com/cards/card_c51ae96f5cebf3e_thumb_m"
                + "edium_2.png?version=v1&expires=1636910992&signature=zxK7VKGiTvz5Ywrkaydd0v3GcYf5"
                + "8R7A08J4tNfI7-aiNODDcTF3l0MqY13n9Pyc8RXSdD0XVBY-OpbA1VM-Ag\",\"large\":\"https:/"
                + "/lob-assets.com/cards/card_c51ae96f5cebf3e_thumb_large_2.png?version=v1&expires="
                + "1636910992&signature=r0OFUhh315ZwN0raMZdIwJd2oCIEYsz0BABaMxIuO1PKTD0ckGWrhcGdzk2"
                + "dlWQ6vSvp0CUQ5k1RXGqkIIqkDw\"}],\"available_quantity\":10000,\"pending_quantity"
                + "\":0,\"countries\":null,\"status\":\"rendered\",\"mode\":\"test\",\"orientation"
                + "\":\"horizontal\",\"threshold_amount\":0,\"date_created\":\"2021-03-24T22:51:42."
                + "838Z\",\"date_modified\":\"2021-03-24T22:51:42.838Z\",\"send_date\":\"2021-03-24"
                + "T22:51:42.838Z\",\"object\":\"card\"}",
                TestHelper.convertStreamToString(httpResponse.getResponse().getRawBody()), 
                false, true, false));
    }

}
