/*
 * LobLib
 *
 * This file was automatically generated by APIMATIC v3.0 ( https://www.apimatic.io ).
 */

package com.lob.api.controllers;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNotNull;
import static org.junit.Assert.assertTrue;

import com.fasterxml.jackson.core.type.TypeReference;
import com.lob.api.ApiHelper;
import com.lob.api.LobClient;
import com.lob.api.exceptions.ApiException;
import com.lob.api.models.AllSelfMailers;
import com.lob.api.models.BeforeAfter;
import com.lob.api.models.MailTypeEnum;
import com.lob.api.models.SelfMailer;
import com.lob.api.models.SelfMailerEditable;
import com.lob.api.models.SelfMailerSizeEnum;
import com.lob.api.models.SortBy1;
import com.lob.api.models.containers.SendDate;
import io.apimatic.core.utilities.TestHelper;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.Map;
import org.junit.AfterClass;
import org.junit.BeforeClass;
import org.junit.Test;

public class SelfMailersControllerTest extends BaseControllerTest {

    /**
     * Client instance.
     */
    private static LobClient client;
    
    /**
     * Controller instance (for all tests).
     */
    private static SelfMailersController controller;

    /**
     * Setup test class.
     */
    @BeforeClass
    public static void setUpClass() {
        client = createConfiguration();
        controller = client.getSelfMailersController();
    }

    /**
     * Tear down test class.
     */
    @AfterClass
    public static void tearDownClass() {
        controller = null;
    }

    /**
     * Returns a list of your self_mailers. The self_mailers are returned sorted by creation date,
     * with the most recently created self_mailers appearing first.
     * @throws Throwable exception if occurs.
     */
    @Test
    public void testTestSelfMailersList() throws Exception {
        // Parameters for the API call
        Integer limit = 10;
        BeforeAfter beforeAfter = null;
        List<String> include = null;
        Map<String, String> dateCreated = null;
        Map<String, String> metadata = null;
        List<SelfMailerSizeEnum> size = null;
        Boolean scheduled = null;
        SendDate sendDate = null;
        MailTypeEnum mailType = MailTypeEnum.fromString(
                "usps_first_class");
        SortBy1 sortBy = null;

        // Set callback and perform API call
        AllSelfMailers result = null;
        try {
            result = controller.selfMailersList(limit, beforeAfter, include, dateCreated, metadata, size, scheduled, sendDate, mailType, sortBy);
        } catch (ApiException e) {
            // Empty block
        }

        // Test whether the response is null
        assertNotNull("Response is null", 
                httpResponse.getResponse());
        // Test response code
        assertEquals("Status is not 200", 
                200, httpResponse.getResponse().getStatusCode());

        // Test headers
        Map<String, String> headers = new LinkedHashMap<String, String>();
        headers.put("Content-Type", "application/json");
        
        assertTrue("Headers do not match", TestHelper.areHeadersProperSubsetOf(
                headers, httpResponse.getResponse().getHeaders().asSimpleMap(), true));

        // Test whether the captured response is as we expected
        assertNotNull("Result does not exist", 
                result);
        assertTrue("Response body does not match in keys", 
                TestHelper.isJsonObjectProperSubsetOf(
                "{\"data\":[{\"id\":\"sfm_7239rhwqkrfaskas\",\"description\":\"April Campaign\",\"m"
                + "etadata\":{},\"to\":{\"id\":\"adr_asdi2y3riuasasoi\",\"description\":\"Harry - O"
                + "ffice\",\"name\":\"Harry Zhang\",\"company\":\"Lob\",\"phone\":\"5555555555\","
                + "\"email\":\"harry@lob.com\",\"metadata\":{},\"address_line1\":\"370 WATER ST\","
                + "\"address_line2\":\"\",\"address_city\":\"SUMMERSIDE\",\"address_state\":\"PRINC"
                + "E EDWARD ISLAND\",\"address_zip\":\"C1N 1C4\",\"address_country\":\"CANADA\",\"r"
                + "ecipient_moved\":false,\"date_created\":\"2019-09-20T00:14:00.361Z\",\"date_modi"
                + "fied\":\"2019-09-20T00:14:00.361Z\",\"object\":\"address\"},\"from\":{\"id\":\"a"
                + "dr_210a8d4b0b76d77b\",\"description\":null,\"name\":null,\"company\":\"LOB\",\"p"
                + "hone\":null,\"email\":null,\"address_line1\":\"210 KING ST STE 6100\",\"address_"
                + "line2\":null,\"address_city\":\"SAN FRANCISCO\",\"address_state\":\"CA\",\"addre"
                + "ss_zip\":\"94107-1741\",\"address_country\":\"UNITED STATES\",\"metadata\":{},"
                + "\"date_created\":\"2018-12-08T03:01:07.651Z\",\"date_modified\":\"2018-12-08T03:"
                + "01:07.651Z\",\"object\":\"address\"},\"url\":\"https://lob-assets.com/self-maile"
                + "rs/sfm_8ffbe811dea49dcf.pdf?version=v1&expires=1618781264&signature=YP_bCwrgVA2l"
                + "z1Gr1YVCJN1f-WspUGsH0aJp2ihjfLXU7lDUV12_xRv4uPch0mfWeOOxEqpyP8hGpgvjmQKNAw\",\"o"
                + "utside_template_id\":\"tmpl_a3cb937f26d7eec\",\"inside_template_id\":\"tmpl_a3cb"
                + "937f26d7eec\",\"inside_template_version_id\":\"vrsn_bfdf70893b00a85\",\"outside_"
                + "template_version_id\":\"vrsn_bfdf70893b00a85\",\"carrier\":\"USPS\",\"tracking_e"
                + "vents\":[],\"thumbnails\":[{\"small\":\"https://lob-assets.com/self-mailers/sfm_"
                + "8ffbe811dea49dcf_thumb_small_1.png?version=v1&expires=1618781264&signature=A7q5H"
                + "bRO53sUYYnwGlmP5mTS6ylLE7kS2mYhfcEOdexjyqG7UseK0MD26DppE4Q0aE4u2msDVMxd5ukjMerYC"
                + "g\",\"medium\":\"https://lob-assets.com/self-mailers/sfm_8ffbe811dea49dcf_thumb_"
                + "medium_1.png?version=v1&expires=1618781264&signature=b9pynuawVpU_vrhnT_mTpksdE-F"
                + "LF_ZjdIBOFR_ltIzEGlx-VKD4VvZrqP98lG2D8V7UKQ7SdRr2nUAk4LxvCg\",\"large\":\"https:"
                + "//lob-assets.com/self-mailers/sfm_8ffbe811dea49dcf_thumb_large_1.png?version=v1&"
                + "expires=1618781264&signature=g2jifhCselPqIj8au6lsbJMNFN8ZX3aM6GkLoAXiHBCS8X5mF9n"
                + "hVbmO0odpnmwNlV1CWIp-MXVsZkC3NmxqBQ\"},{\"small\":\"https://lob-assets.com/self-"
                + "mailers/sfm_8ffbe811dea49dcf_thumb_small_2.png?version=v1&expires=1618781264&sig"
                + "nature=biJY4-ZbNNRydPYg3cZkq7wxjILbPBK_nIVyoyQsg5X5q4jlsa-2fzeMa48V9jprUetsC6WEu"
                + "YvasHosRfG_DQ\",\"medium\":\"https://lob-assets.com/self-mailers/sfm_8ffbe811dea"
                + "49dcf_thumb_medium_2.png?version=v1&expires=1618781264&signature=xEAX7bURyc8fSph"
                + "acuo5yb7iVIpT8Xvq05KgMaNQS4r3aCpx0z1p42wbPmW758B5Ae0li1YDYvVyzS7qJIoWAw\",\"larg"
                + "e\":\"https://lob-assets.com/self-mailers/sfm_8ffbe811dea49dcf_thumb_large_2.png"
                + "?version=v1&expires=1618781264&signature=NieHDnoQ7STZUvofHrFt7S987CzIkUJWpaSgpVQ"
                + "PZw-C3_wwTPsIrvxYdXEuFrr6ciTUcxRBFPlE0lurmMkyCA\"}],\"merge_variables\":{\"name"
                + "\":null},\"size\":\"6x18_bifold\",\"mail_type\":\"usps_first_class\",\"expected_"
                + "delivery_date\":\"2021-03-24\",\"date_created\":\"2021-03-16T18:40:40.504Z\",\"d"
                + "ate_modified\":\"2021-03-16T18:41:06.691Z\",\"send_date\":\"2021-03-16T18:45:40."
                + "493Z\",\"deleted\":true,\"use_type\":\"marketing\",\"fsc\":false,\"object\":\"se"
                + "lf_mailer\"},{\"id\":\"sfm_8ffbe811dea49dcf\",\"description\":\"April Campaign"
                + "\",\"metadata\":{},\"to\":{\"id\":\"adr_f9228b743884ff98\",\"description\":null,"
                + "\"name\":\"AYA\",\"company\":null,\"phone\":null,\"email\":null,\"address_line1"
                + "\":\"2812 PARK RD\",\"address_line2\":null,\"address_city\":\"CHARLOTTE\",\"addr"
                + "ess_state\":\"NC\",\"address_zip\":\"28209-1314\",\"address_country\":\"UNITED S"
                + "TATES\",\"metadata\":{},\"date_created\":\"2021-03-16T18:40:40.410Z\",\"date_mod"
                + "ified\":\"2021-03-16T18:40:40.410Z\",\"deleted\":true,\"object\":\"address\"},"
                + "\"from\":{\"id\":\"adr_210a8d4b0b76d77b\",\"description\":null,\"name\":null,\"c"
                + "ompany\":\"LOB\",\"phone\":null,\"email\":null,\"address_line1\":\"210 KING ST S"
                + "TE 6100\",\"address_line2\":null,\"address_city\":\"SAN FRANCISCO\",\"address_st"
                + "ate\":\"CA\",\"address_zip\":\"94107-1741\",\"address_country\":\"UNITED STATES"
                + "\",\"metadata\":{},\"date_created\":\"2018-12-08T03:01:07.651Z\",\"date_modified"
                + "\":\"2018-12-08T03:01:07.651Z\",\"object\":\"address\"},\"url\":\"https://lob-as"
                + "sets.com/self-mailers/sfm_8ffbe811dea49dcf.pdf?version=v1&expires=1618781264&sig"
                + "nature=YP_bCwrgVA2lz1Gr1YVCJN1f-WspUGsH0aJp2ihjfLXU7lDUV12_xRv4uPch0mfWeOOxEqpyP"
                + "8hGpgvjmQKNAw\",\"outside_template_id\":\"tmpl_a3cb937f26d7eec\",\"inside_templa"
                + "te_id\":\"tmpl_a3cb937f26d7eec\",\"inside_template_version_id\":\"vrsn_bfdf70893"
                + "b00a85\",\"outside_template_version_id\":\"vrsn_bfdf70893b00a85\",\"carrier\":"
                + "\"USPS\",\"tracking_events\":[],\"thumbnails\":[{\"small\":\"https://lob-assets."
                + "com/self-mailers/sfm_8ffbe811dea49dcf_thumb_small_1.png?version=v1&expires=16187"
                + "81264&signature=A7q5HbRO53sUYYnwGlmP5mTS6ylLE7kS2mYhfcEOdexjyqG7UseK0MD26DppE4Q0"
                + "aE4u2msDVMxd5ukjMerYCg\",\"medium\":\"https://lob-assets.com/self-mailers/sfm_8f"
                + "fbe811dea49dcf_thumb_medium_1.png?version=v1&expires=1618781264&signature=b9pynu"
                + "awVpU_vrhnT_mTpksdE-FLF_ZjdIBOFR_ltIzEGlx-VKD4VvZrqP98lG2D8V7UKQ7SdRr2nUAk4LxvCg"
                + "\",\"large\":\"https://lob-assets.com/self-mailers/sfm_8ffbe811dea49dcf_thumb_la"
                + "rge_1.png?version=v1&expires=1618781264&signature=g2jifhCselPqIj8au6lsbJMNFN8ZX3"
                + "aM6GkLoAXiHBCS8X5mF9nhVbmO0odpnmwNlV1CWIp-MXVsZkC3NmxqBQ\"},{\"small\":\"https:/"
                + "/lob-assets.com/self-mailers/sfm_8ffbe811dea49dcf_thumb_small_2.png?version=v1&e"
                + "xpires=1618781264&signature=biJY4-ZbNNRydPYg3cZkq7wxjILbPBK_nIVyoyQsg5X5q4jlsa-2"
                + "fzeMa48V9jprUetsC6WEuYvasHosRfG_DQ\",\"medium\":\"https://lob-assets.com/self-ma"
                + "ilers/sfm_8ffbe811dea49dcf_thumb_medium_2.png?version=v1&expires=1618781264&sign"
                + "ature=xEAX7bURyc8fSphacuo5yb7iVIpT8Xvq05KgMaNQS4r3aCpx0z1p42wbPmW758B5Ae0li1YDYv"
                + "VyzS7qJIoWAw\",\"large\":\"https://lob-assets.com/self-mailers/sfm_8ffbe811dea49"
                + "dcf_thumb_large_2.png?version=v1&expires=1618781264&signature=NieHDnoQ7STZUvofHr"
                + "Ft7S987CzIkUJWpaSgpVQPZw-C3_wwTPsIrvxYdXEuFrr6ciTUcxRBFPlE0lurmMkyCA\"}],\"merge"
                + "_variables\":{\"name\":null},\"size\":\"6x18_bifold\",\"mail_type\":\"usps_first"
                + "_class\",\"expected_delivery_date\":\"2021-03-24\",\"date_created\":\"2021-03-16"
                + "T18:40:40.504Z\",\"date_modified\":\"2021-03-16T18:41:06.691Z\",\"send_date\":"
                + "\"2021-03-16T18:45:40.493Z\",\"deleted\":true,\"use_type\":\"marketing\",\"fsc"
                + "\":true,\"object\":\"self_mailer\"}],\"object\":\"list\",\"next_url\":null,\"pre"
                + "vious_url\":null,\"count\":2}",
                TestHelper.convertStreamToString(httpResponse.getResponse().getRawBody()), 
                false, true, false));
    }

    /**
     * Creates a new self_mailer given information.
     * @throws Throwable exception if occurs.
     */
    @Test
    public void testTestSelfMailerCreate() throws Exception {
        // Parameters for the API call
        SelfMailerEditable body = ApiHelper.deserialize(
                "{\"description\":\"Demo Self Mailer job\",\"to\":\"adr_bae820679f3f536b\",\"from"
                + "\":\"adr_210a8d4b0b76d77b\",\"inside\":\"https://lob.com/selfmailerinside.pdf\","
                + "\"outside\":\"https://lob.com/selfmaileroutside.pdf\",\"size\":\"12x9_bifold\","
                + "\"metadata\":{\"spiffy\":\"true\"},\"mail_type\":\"usps_standard\",\"merge_varia"
                + "bles\":{\"name\":\"Harry\"},\"use_type\":\"marketing\"}",
                SelfMailerEditable.class);
        String idempotencyKey = 
                "026e7634-24d7-486c-a0bb-4a17fd0eebc5";

        // Set callback and perform API call
        SelfMailer result = null;
        try {
            result = controller.selfMailerCreate(body, idempotencyKey);
        } catch (ApiException e) {
            // Empty block
        }

        // Test whether the response is null
        assertNotNull("Response is null", 
                httpResponse.getResponse());
        // Test response code
        assertEquals("Status is not 200", 
                200, httpResponse.getResponse().getStatusCode());

        // Test headers
        Map<String, String> headers = new LinkedHashMap<String, String>();
        headers.put("ratelimit-limit", TestHelper.NULL_STRING);
        headers.put("ratelimit-remaining", TestHelper.NULL_STRING);
        headers.put("ratelimit-reset", TestHelper.NULL_STRING);
        headers.put("Content-Type", "application/json");
        
        assertTrue("Headers do not match", TestHelper.areHeadersProperSubsetOf(
                headers, httpResponse.getResponse().getHeaders().asSimpleMap(), true));

        // Test whether the captured response is as we expected
        assertNotNull("Result does not exist", 
                result);
        assertTrue("Response body does not match in keys", 
                TestHelper.isJsonObjectProperSubsetOf(
                "{\"id\":\"sfm_8ffbe811dea49dcf\",\"description\":\"April Campaign\",\"metadata\":{"
                + "},\"to\":{\"id\":\"adr_bae820679f3f536b\",\"description\":null,\"name\":\"HARRY "
                + "ZHANG\",\"company\":null,\"phone\":null,\"email\":null,\"address_line1\":\"210 K"
                + "ING ST STE 6100\",\"address_line2\":null,\"address_city\":\"SAN FRANCISCO\",\"ad"
                + "dress_state\":\"CA\",\"address_zip\":\"94107-1741\",\"address_country\":\"UNITED"
                + " STATES\",\"metadata\":{},\"date_created\":\"2017-09-05T17:47:53.767Z\",\"date_m"
                + "odified\":\"2017-09-05T17:47:53.767Z\",\"deleted\":true,\"object\":\"address\"},"
                + "\"from\":{\"id\":\"adr_210a8d4b0b76d77b\",\"description\":null,\"name\":\"LEORE "
                + "AVIDAR\",\"company\":null,\"phone\":null,\"email\":null,\"address_line1\":\"210 "
                + "KING ST STE 6100\",\"address_line2\":null,\"address_city\":\"SAN FRANCISCO\",\"a"
                + "ddress_state\":\"CA\",\"address_zip\":\"94107-1741\",\"address_country\":\"UNITE"
                + "D STATES\",\"metadata\":{},\"date_created\":\"2017-09-05T17:47:53.767Z\",\"date_"
                + "modified\":\"2017-09-05T17:47:53.767Z\",\"deleted\":true,\"object\":\"address\"}"
                + ",\"url\":\"https://lob-assets.com/self-mailers/sfm_8ffbe811dea49dcf.pdf?version="
                + "v1&expires=1618512040&signature=qvyCqXI1ndBvc4AjvG8FlirqLXEcfmYo4sDrRtabaXMOsX88"
                + "to9G3K49uIk_aqevvZXe8HoRYD_nWydbQHqaCA\",\"outside_template_id\":\"tmpl_a3cb937f"
                + "26d7eec\",\"inside_template_id\":\"tmpl_a3cb937f26d7eec\",\"inside_template_vers"
                + "ion_id\":\"vrsn_bfdf70893b00a85\",\"outside_template_version_id\":\"vrsn_bfdf708"
                + "93b00a85\",\"carrier\":\"USPS\",\"tracking_events\":[],\"thumbnails\":[{\"small"
                + "\":\"https://lob-assets.com/self-mailers/sfm_8ffbe811dea49dcf_thumb_small_1.png?"
                + "version=v1&expires=1618512040&signature=-bipeUHP-hAMcCBSrWM0ZH1VwRdSPNVGGZN9hAZK"
                + "r6Lh4ly6uxvratVd5LXJCK_zOEMYk_mTWASt0ge7OY6SDA\",\"medium\":\"https://lob-assets"
                + ".com/self-mailers/sfm_8ffbe811dea49dcf_thumb_medium_1.png?version=v1&expires=161"
                + "8512040&signature=ryxN7bsXGtw_GRFSP3Cs3A3IYjxZi3cW9BHDCNgMt6p3nobVmsc_iFHt2e-S7n"
                + "dAXhhN7nP-MQVov3bt3r37BQ\",\"large\":\"https://lob-assets.com/self-mailers/sfm_8"
                + "ffbe811dea49dcf_thumb_large_1.png?version=v1&expires=1618512040&signature=kBrm00"
                + "xkyCkJNJRHxH8HshFaebtOxnzjVWOs1VVmGMuw8H6OBNcMAMxt9s49K0jlpHoh3Nr9uSncEZMQaaNjAg"
                + "\"},{\"small\":\"https://lob-assets.com/self-mailers/sfm_8ffbe811dea49dcf_thumb_"
                + "small_2.png?version=v1&expires=1618512040&signature=3gTgU7Fd3KoT_vNlQnTGptRps5Zg"
                + "nkhSnPrAwk7L98higIzSwfKoLvuu_DIpMM48dHbxckKT9waR8euJ4KSDBQ\",\"medium\":\"https:"
                + "//lob-assets.com/self-mailers/sfm_8ffbe811dea49dcf_thumb_medium_2.png?version=v1"
                + "&expires=1618512040&signature=Ue1lw5CMj7KRx6cMQL8xPeazaHCdJzWcACd1w3acuYPnWkVIpS"
                + "t62OIO7hAtpAQK9xm1dhhlFj0rqRZMdRMMBA\",\"large\":\"https://lob-assets.com/self-m"
                + "ailers/sfm_8ffbe811dea49dcf_thumb_large_2.png?version=v1&expires=1618512040&sign"
                + "ature=cICc7HEm1xG_eyM4a_wtvPk2FqoLRmtgGa29kJisWnMIYBL0OkyzG4ZCYGMhp-5cZpJlSpXfTg"
                + "GKh_Qmeo1TDw\"}],\"merge_variables\":{\"name\":null},\"size\":\"6x18_bifold\","
                + "\"mail_type\":\"usps_first_class\",\"expected_delivery_date\":\"2021-03-24\",\"d"
                + "ate_created\":\"2021-03-16T18:40:40.504Z\",\"date_modified\":\"2021-03-16T18:40:"
                + "40.504Z\",\"send_date\":\"2021-03-16T18:45:40.493Z\",\"use_type\":\"marketing\","
                + "\"fsc\":false,\"object\":\"self_mailer\"}",
                TestHelper.convertStreamToString(httpResponse.getResponse().getRawBody()), 
                false, true, false));
    }

}
