/*
 * LobLib
 *
 * This file was automatically generated by APIMATIC v3.0 ( https://www.apimatic.io ).
 */

package com.lob.api.controllers;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNotNull;
import static org.junit.Assert.assertTrue;

import com.fasterxml.jackson.core.type.TypeReference;
import com.lob.api.ApiHelper;
import com.lob.api.LobClient;
import com.lob.api.exceptions.ApiException;
import com.lob.api.models.AllLetters;
import com.lob.api.models.BeforeAfter;
import com.lob.api.models.MailTypeEnum;
import com.lob.api.models.SortBy1;
import com.lob.api.models.containers.SendDate;
import io.apimatic.core.utilities.TestHelper;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.Map;
import org.junit.AfterClass;
import org.junit.BeforeClass;
import org.junit.Test;

public class LettersControllerTest extends BaseControllerTest {

    /**
     * Client instance.
     */
    private static LobClient client;
    
    /**
     * Controller instance (for all tests).
     */
    private static LettersController controller;

    /**
     * Setup test class.
     */
    @BeforeClass
    public static void setUpClass() {
        client = createConfiguration();
        controller = client.getLettersController();
    }

    /**
     * Tear down test class.
     */
    @AfterClass
    public static void tearDownClass() {
        controller = null;
    }

    /**
     * Returns a list of your letters. The letters are returned sorted by creation date, with the
     * most recently created letters appearing first.
     * @throws Throwable exception if occurs.
     */
    @Test
    public void testTestLettersList() throws Exception {
        // Parameters for the API call
        Integer limit = 10;
        BeforeAfter beforeAfter = null;
        List<String> include = null;
        Map<String, String> dateCreated = null;
        Map<String, String> metadata = null;
        Boolean color = null;
        Boolean scheduled = null;
        SendDate sendDate = null;
        MailTypeEnum mailType = MailTypeEnum.fromString(
                "usps_first_class");
        SortBy1 sortBy = null;

        // Set callback and perform API call
        AllLetters result = null;
        try {
            result = controller.lettersList(limit, beforeAfter, include, dateCreated, metadata, color, scheduled, sendDate, mailType, sortBy);
        } catch (ApiException e) {
            // Empty block
        }

        // Test whether the response is null
        assertNotNull("Response is null", 
                httpResponse.getResponse());
        // Test response code
        assertEquals("Status is not 200", 
                200, httpResponse.getResponse().getStatusCode());

        // Test headers
        Map<String, String> headers = new LinkedHashMap<String, String>();
        headers.put("Content-Type", "application/json");
        
        assertTrue("Headers do not match", TestHelper.areHeadersProperSubsetOf(
                headers, httpResponse.getResponse().getHeaders().asSimpleMap(), true));

        // Test whether the captured response is as we expected
        assertNotNull("Result does not exist", 
                result);
        assertTrue("Response body does not match in keys", 
                TestHelper.isJsonObjectProperSubsetOf(
                "{\"data\":[{\"id\":\"ltr_5ba44b462c79f07c\",\"description\":\"Demo Letter\",\"meta"
                + "data\":{},\"to\":{\"id\":\"adr_asdi2y3riuasasoi\",\"description\":\"Harry - Offi"
                + "ce\",\"name\":\"Harry Zhang\",\"company\":\"Lob\",\"phone\":\"5555555555\",\"ema"
                + "il\":\"harry@lob.com\",\"metadata\":{},\"address_line1\":\"370 WATER ST\",\"addr"
                + "ess_line2\":\"\",\"address_city\":\"SUMMERSIDE\",\"address_state\":\"PRINCE EDWA"
                + "RD ISLAND\",\"address_zip\":\"C1N 1C4\",\"address_country\":\"CANADA\",\"recipie"
                + "nt_moved\":false,\"date_created\":\"2019-09-20T00:14:00.361Z\",\"date_modified"
                + "\":\"2019-09-20T00:14:00.361Z\",\"object\":\"address\"},\"from\":{\"id\":\"adr_2"
                + "10a8d4b0b76d77b\",\"description\":null,\"name\":\"LEORE AVIDAR\",\"company\":nul"
                + "l,\"phone\":null,\"email\":null,\"address_line1\":\"210 KING ST STE 6100\",\"add"
                + "ress_line2\":null,\"address_city\":\"SAN FRANCISCO\",\"address_state\":\"CA\","
                + "\"address_zip\":\"94107-1741\",\"address_country\":\"UNITED STATES\",\"metadata"
                + "\":{},\"date_created\":\"2018-12-08T03:01:07.651Z\",\"date_modified\":\"2018-12-"
                + "08T03:01:07.651Z\",\"object\":\"address\"},\"color\":true,\"double_sided\":false"
                + ",\"address_placement\":\"top_first_page\",\"return_envelope\":false,\"perforated"
                + "_page\":null,\"extra_service\":\"certified\",\"custom_envelope\":null,\"template"
                + "_id\":\"tmpl_a\",\"template_version_id\":\"vrsn_a\",\"mail_type\":\"usps_first_c"
                + "lass\",\"url\":\"https://lob-assets.com/letters/ltr_5ba44b462c79f07c.pdf?version"
                + "=v1&expires=1568239830&signature=Ob-DUPLJLM4scWQeCDNadPJ4j33MZw16pykOxwv2us-bA7u"
                + "tTYi6oZ8WrEtBYDBBo09XkapR3gdJf0NEr90xAA\",\"merge_variables\":null,\"carrier\":"
                + "\"USPS\",\"tracking_number\":\"92071902358909000011275538\",\"tracking_events\":"
                + "[{\"id\":\"evnt_9e84094c9368cfb\",\"type\":\"certified\",\"name\":\"Delivered\","
                + "\"details\":{\"event\":\"delivered\",\"description\":\"Package has been delivere"
                + "d.\",\"notes\":\"Delivered, Front Desk/Reception/Mail Room\",\"action_required"
                + "\":false},\"location\":\"33408\",\"time\":\"2019-10-08T19:41:00Z\",\"date_create"
                + "d\":\"2019-10-08T19:41:00Z\",\"date_modified\":\"2019-10-08T19:41:00Z\",\"object"
                + "\":\"tracking_event\"}],\"thumbnails\":[{\"small\":\"https://lob-assets.com/lett"
                + "ers/ltr_5ba44b462c79f07c_thumb_small_1.png?version=v1&expires=1568239830&signatu"
                + "re=xZUmE8rq8wSECHPEb9c37cUDZBzGUO3XK5LsIPZhI6dOXgm6zJEn8_7tKuZ3JWBmvNJNXdTl_ufkN"
                + "u4avjQUDw\",\"medium\":\"https://lob-assets.com/letters/ltr_5ba44b462c79f07c_thu"
                + "mb_medium_1.png?version=v1&expires=1568239830&signature=H7354Qpcm9S4aXbrMsBe6QJ6"
                + "lSNi9IWPgMJtLWLi4Kyx9tHF8Mp9YEc_IL9x89Jfw4-yRzKDXA410X4W0PssBQ\",\"large\":\"htt"
                + "ps://lob-assets.com/letters/ltr_5ba44b462c79f07c_thumb_large_1.png?version=v1&ex"
                + "pires=1568239830&signature=54LUIDKZyItA9pnC87d1pJVAuw8bhKLCsMpNWkB3LgdVWxPxxb_c1"
                + "IyIWAbSR-dyOYEOlDBCc40J4Kns-O_mAg\"}],\"expected_delivery_date\":\"2019-08-16\","
                + "\"date_created\":\"2019-08-08T17:09:14.514Z\",\"date_modified\":\"2019-08-08T17:"
                + "09:16.850Z\",\"send_date\":\"2019-08-08\",\"use_type\":\"marketing\",\"fsc\":fal"
                + "se,\"object\":\"letter\"},{\"id\":\"ltr_da8267c6a6545cd6\",\"description\":\"Dem"
                + "o Letter\",\"metadata\":{},\"to\":{\"id\":\"adr_210a8d4b0b76d77b\",\"description"
                + "\":null,\"name\":\"LEORE AVIDAR\",\"company\":null,\"phone\":null,\"email\":null"
                + ",\"address_line1\":\"210 KING ST STE 6100\",\"address_line2\":null,\"address_cit"
                + "y\":\"SAN FRANCISCO\",\"address_state\":\"CA\",\"address_zip\":\"94107-1741\","
                + "\"address_country\":\"UNITED STATES\",\"metadata\":{},\"date_created\":\"2018-12"
                + "-08T03:01:07.651Z\",\"date_modified\":\"2018-12-08T03:01:07.651Z\",\"object\":"
                + "\"address\"},\"from\":{\"id\":\"adr_210a8d4b0b76d77b\",\"description\":null,\"na"
                + "me\":\"LEORE AVIDAR\",\"company\":null,\"phone\":null,\"email\":null,\"address_l"
                + "ine1\":\"210 KING ST STE 6100\",\"address_line2\":null,\"address_city\":\"SAN FR"
                + "ANCISCO\",\"address_state\":\"CA\",\"address_zip\":\"94107-1741\",\"address_coun"
                + "try\":\"UNITED STATES\",\"metadata\":{},\"date_created\":\"2018-12-08T03:01:07.6"
                + "51Z\",\"date_modified\":\"2018-12-08T03:01:07.651Z\",\"object\":\"address\"},\"c"
                + "olor\":true,\"double_sided\":false,\"address_placement\":\"top_first_page\",\"re"
                + "turn_envelope\":false,\"perforated_page\":null,\"extra_service\":null,\"custom_e"
                + "nvelope\":null,\"mail_type\":\"usps_first_class\",\"url\":\"https://lob-assets.c"
                + "om/letters/ltr_da8267c6a6545cd6.pdf?version=v1&expires=1568239830&signature=HH-5"
                + "RnbD4x0eJcnEC9HhqKSvQGsbkjovzvqSKgBijUHKIXwEKQJ4CbYhKs_U2q2A1k20Xefcaw7bfdPKozuq"
                + "CQ\",\"merge_variables\":null,\"carrier\":\"USPS\",\"tracking_number\":null,\"tr"
                + "acking_events\":[],\"thumbnails\":[{\"small\":\"https://lob-assets.com/letters/l"
                + "tr_da8267c6a6545cd6_thumb_small_1.png?version=v1&expires=1568239830&signature=C1"
                + "Rs83187HpWGhsg_pJIOhDIKlDtC_IgBBxHiocCEzJ8CncJwqrq5yHke-p97Dv7o81G_pfhFmirai589O"
                + "6DCw\",\"medium\":\"https://lob-assets.com/letters/ltr_da8267c6a6545cd6_thumb_me"
                + "dium_1.png?version=v1&expires=1568239830&signature=gz63l0yi3sK_sXjYfIVdLSvkknJFr"
                + "_O5TWRulo_iKIgS-PosIl6J0tDR6bx_Tv5Ab_w7DABg3qdKZ846MZ7TCw\",\"large\":\"https://"
                + "lob-assets.com/letters/ltr_da8267c6a6545cd6_thumb_large_1.png?version=v1&expires"
                + "=1568239830&signature=4Y1OIymaWkSO3aBIHCeshFAVnF-pDcF2FFqkx_jovaUFuk4FT1SI24L7_P"
                + "OwTRXQHlETMGlzkP_CGgqselRUAA\"}],\"expected_delivery_date\":\"2019-08-16\",\"dat"
                + "e_created\":\"2019-08-08T17:08:12.224Z\",\"date_modified\":\"2019-08-08T17:08:13"
                + ".990Z\",\"send_date\":\"2019-08-08T17:08:12.224Z\",\"cards\":null,\"use_type\":"
                + "\"marketing\",\"fsc\":true,\"object\":\"letter\"}],\"object\":\"list\",\"next_ur"
                + "l\":\"https://api.lob.com/v1/letters?limit=2&after=eyJkYXRlT2Zmc2V0IjoiMjAxOS0wO"
                + "C0wOFQxNzowODoxMi4yMjRaIiwiaWRPZmZzZXQiOiJsdHJfZGE4MjY3YzZhNjU0NWNkNiJ9\",\"prev"
                + "ious_url\":null,\"count\":2}",
                TestHelper.convertStreamToString(httpResponse.getResponse().getRawBody()), 
                false, true, false));
    }

}
